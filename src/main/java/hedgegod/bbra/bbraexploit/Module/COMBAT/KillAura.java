package hedgegod.bbra.bbraexploit.Module.COMBAT;

import java.util.Comparator;

import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.util.EnumHand;
import net.minecraft.util.math.BlockPos;
import net.minecraft.util.math.MathHelper;
import net.minecraftforge.client.event.RenderWorldLastEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import org.lwjgl.input.Keyboard;

import hedgegod.bbra.bbraexploit.Module.Module;
import hedgegod.bbra.bbraexploit.utils.MainUtils;

import java.util.ArrayList;
import java.util.Comparator;
import java.util.Objects;

public class KillAura extends Module {
	
	
    public KillAura() {
        super("KillAura", Keyboard.KEY_K, Category.COMBAT);

//        ArrayList<String> options = new ArrayList<>();
//
//        options.add("Rage");
//        options.add("Rotation");
    }

    @SubscribeEvent
    public void onUpdate(RenderWorldLastEvent e) {
        String mode = "rotations";
        double range = 4.2;
        boolean onlyCrits = true;

        EntityPlayer target  = mainUtils.getEnemyPlayer(range);
        if (target != null) {
            if (onlyCrits && mc.player.moveForward <= 0) {
            	
            	mc.player.jump();
            	
//            	mc.player.motionY += 0.5;
//             	mc.player.motionY -= 0.1;
            }

            if (Objects.equals(mode, "rotations")) {
            	mainUtils.rotateLegit(target);
            }
            
            if ((Objects.equals(mode, "rotations") &&      // this long if checks if the rotations turned on to attack
            	mc.player.getCooledAttackStrength(0) == 1 &&
            	mainUtils.getUrActualYaw() == mainUtils.getTargetActualYaw(target)) ||
            	(!Objects.equals(mode, "rotations") && mc.player.getCooledAttackStrength(0) == 1)) {
            	mainUtils.attack(target);
            }

        }
    }

    public EntityPlayer getTarget() {
    	return this.target;
    }
    

}
