package hedgegod.bbra.bbraexploit.Module.COMBAT;

import net.minecraft.entity.player.EntityPlayer;
import net.minecraftforge.client.event.RenderWorldLastEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import org.lwjgl.input.Keyboard;

import hedgegod.bbra.bbraexploit.Module.Module;
import hedgegod.bbra.bbraexploit.utils.ChatUtil;

import java.util.Objects;

public class KillAura extends Module {
	
	
    public KillAura() {
        super("KillAura", Keyboard.KEY_K, Category.COMBAT);

//        ArrayList<String> options = new ArrayList<>();
//
//        options.add("Rage");
//        options.add("Rotation");
    }

    @SubscribeEvent
    public void onUpdate(RenderWorldLastEvent e) {
        String mode = "rotations";
        double range = 4.2;
        boolean onlyCrits = true;

        EntityPlayer target  = mainUtils.getEnemyPlayer(range);
        if (target != null) {
        	
        	ChatUtil.debugMsg("On ground? "+mc.player.onGround);
        	
            if (onlyCrits && mc.player.moveForward <= 0 && mc.player.onGround) {
            	

            	mc.player.onGround = false;
            	mc.player.jump();
             	
             	ChatUtil.debugMsg("Tried to jump");
             	
            }

            if (Objects.equals(mode, "rotations")) {
            	mainUtils.rotateLegit(target);
//            	ChatUtils.sendMessage("Tried to rotate");
            }
            
            if (
            	
            	(Objects.equals(mode, "rotations") &&      // this long "if" checks if the rotations turned on to attack
            	mc.player.getCooledAttackStrength(0) == 1 &&
            	mainUtils.getUrActualYaw() == mainUtils.getTargetActualYaw(target)) ||
            		
            	(!Objects.equals(mode, "rotations") && mc.player.getCooledAttackStrength(0) == 1)) {
            	
            	mainUtils.attackMainHand(target);
//            	ChatUtils.sendMessage("Tried to hit");
            	
            }

        }
    }

    /*public EntityPlayer getTarget() {
    	return this.target;
    }
    */

}
