package hedgegod.bbra.bbraexploit.Module.COMBAT;

import java.util.Comparator;

import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.util.EnumHand;
import net.minecraft.util.math.BlockPos;
import net.minecraft.util.math.MathHelper;
import net.minecraftforge.client.event.RenderWorldLastEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import org.lwjgl.input.Keyboard;

import hedgegod.bbra.bbraexploit.Module.Module;
import hedgegod.bbra.bbraexploit.utils.MainUtils;

import java.util.ArrayList;
import java.util.Comparator;
import java.util.Objects;

public class KillAura extends Module {
	
	
    public KillAura() {
        super("KillAura", Keyboard.KEY_K, Category.COMBAT);

//        ArrayList<String> options = new ArrayList<>();
//
//        options.add("Rage");
//        options.add("Rotation");
    }

    @SubscribeEvent
    public void onUpdate(RenderWorldLastEvent e) {
        String mode = "rotations";
        double range = 5.9;
        boolean onlyCrits = true;

        EntityPlayer target  = mainUtils.getEnemyPlayer(range);
        if (target != null) {
            if (mc.player.onGround && onlyCrits) {
            	mc.player.connection.sendPacket(new CPacketPlayer.Position(mc.player.posX,0.4,mc.player.posZ,false));
            }

            if (Objects.equals(mode, "rotations")) {
//                mc.player.rotationYaw = mainUtils.rotations(target)[0];
//                mc.player.rotationPitch = mainUtils.rotations(target)[1];
                mc.player.connection.sendPacket(new CPacketPlayer.Rotation(mainUtils.rotations(target)[0],mainUtils.rotations(target)[1],false));
            }

            if (mc.player.getCooledAttackStrength(0) == 1) {
            	mainUtils.attack(target);
            }
        }
    }


}
