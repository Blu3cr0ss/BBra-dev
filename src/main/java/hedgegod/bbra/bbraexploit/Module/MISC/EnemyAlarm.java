package hedgegod.bbra.bbraexploit.Module.MISC;

import hedgegod.bbra.bbraexploit.BBraExploit;
import hedgegod.bbra.bbraexploit.Module.Module;
import hedgegod.bbra.bbraexploit.utils.FriendsManager;
import net.minecraft.client.gui.FontRenderer;
import net.minecraft.client.gui.ScaledResolution;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraftforge.client.event.RenderGameOverlayEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import org.lwjgl.input.Keyboard;
import yea.hedgegod.clickgui.Setting;

import java.awt.*;

public class EnemyAlarm extends Module {

    public EnemyAlarm(){
        super("Enemy Alarm", Keyboard.KEY_NONE, Category.MISC);

        BBraExploit.instance.sManager.rSetting(new Setting("MaxExpected", this, 1, 0, 20, true));
    }
    public int targetsExpected = 1;

    @SubscribeEvent
    public void onRender(RenderGameOverlayEvent.Post e) {
        switch (e.getType()) {
            case TEXT:
                ScaledResolution sr = new ScaledResolution(mc);
                FontRenderer fr = mc.fontRenderer;
                int count = 0;
                for (EntityPlayer ep : mc.world.playerEntities) {
                    if (!FriendsManager.isFriend(ep.getName()) && ep != mc.player) {
                        count++;
                    }
                }
                if (count >= targetsExpected) {
                    fr.drawString(count + " enemies nearby", (sr.getScaledWidth() / 2) - (fr.getStringWidth(count + " enemies nearby") / 2), sr.getScaledHeight() - 55, Color.red.getRGB());
                } else {
                    fr.drawString("Clear!", (sr.getScaledWidth() / 2) - (fr.getStringWidth("Clear!") / 2), sr.getScaledHeight() - 55, Color.green.getRGB());
                }

            default:
                break;
        }
    }
}
