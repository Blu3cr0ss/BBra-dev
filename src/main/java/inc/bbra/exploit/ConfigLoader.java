package inc.bbra.exploit;

import inc.bbra.exploit.utils.ChatUtil;
import inc.bbra.exploit.utils.other.FriendsManager;
import net.minecraftforge.client.event.RenderGameOverlayEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

import java.io.IOException;

public class ConfigLoader {
    boolean isLoaded = false;
    @SubscribeEvent
    public void onRender(RenderGameOverlayEvent.Post e){
        if(!isLoaded){
            try {
                FriendsManager.ConfigManager.loadFromCfg();
                ChatUtil.sendMessage("The config was successfully loaded.");
            } catch (IOException ex) {
                ChatUtil.sendMessage("Failed to load the config.");
                throw new RuntimeException(ex);
            } try {
                FriendsManager.ConfigManager.loadFriendList();
                ChatUtil.sendMessage("The friendlist was successfully loaded");
            } catch (IOException ex) {
                ex.printStackTrace();
                ChatUtil.sendMessage("Failed to load the friendlist");
            }
            isLoaded = true;
        }
    }
}
