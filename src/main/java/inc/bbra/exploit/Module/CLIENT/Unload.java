package inc.bbra.exploit.Module.CLIENT;

import inc.bbra.exploit.Client;
import inc.bbra.exploit.Module.Module;
import inc.bbra.exploit.clickgui.modules.settings.BoolSetting;
import org.lwjgl.input.Keyboard;

import java.io.IOException;
import java.util.Objects;
import java.util.concurrent.CopyOnWriteArrayList;

public class Unload extends Module {
    public Unload(){
        super("Unload", Keyboard.KEY_NONE, Category.CLIENT);
    }

    private static final CopyOnWriteArrayList<String> backUp = new CopyOnWriteArrayList<String>();

    @Override
    public void onEnable(){
        for (Module m : Client.modules){
            if(!(m instanceof Unload) && m.isEnabled()){
                backUp.add(m.name);
                try {
                    m.setToggled(false);
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
        }
    }

    @Override
    public void onDisable() throws IOException {
        for(Module m : Client.modules){
            for(String n : backUp){
                if (Objects.equals(m.name, n)){
                    m.setToggled(true);
                }
            }
        }
        backUp.clear();
    }
}
