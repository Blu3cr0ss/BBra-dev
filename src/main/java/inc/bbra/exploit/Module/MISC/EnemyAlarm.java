package inc.bbra.exploit.Module.MISC;

import inc.bbra.exploit.Module.Module;
import inc.bbra.exploit.clickgui.modules.settings.IntSetting;
import inc.bbra.exploit.utils.other.FriendsManager;
import net.minecraft.client.gui.FontRenderer;
import net.minecraft.client.gui.ScaledResolution;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraftforge.client.event.RenderGameOverlayEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import org.lwjgl.input.Keyboard;

import java.awt.*;

public class EnemyAlarm extends Module {

    public EnemyAlarm() {
        super("Enemy Alarm", Keyboard.KEY_NONE, Category.MISC);
    }

    IntSetting maxEnemies = new IntSetting(this, "Max expected", 1, 0, 20);

    @SubscribeEvent
    public void onRender(RenderGameOverlayEvent.Post e) {
        int targetsExpected = maxEnemies.getVal( );

        switch (e.getType( )) {
            case TEXT:
                ScaledResolution sr = new ScaledResolution(mc);
                FontRenderer fr = mc.fontRenderer;
                int count = 0;
                for (EntityPlayer ep : mc.world.playerEntities) {
                    if (!FriendsManager.isFriend(ep.getName( )) && ep != mc.player) {
                        count++;
                    }
                }
                if (count >= targetsExpected) {
                    fr.drawString(count + " enemies nearby", (sr.getScaledWidth( ) / 2) - (fr.getStringWidth(count + " enemies nearby") / 2), sr.getScaledHeight( ) - 55, Color.red.getRGB( ));
                } else {
                    fr.drawString("Clear!", (sr.getScaledWidth( ) / 2) - (fr.getStringWidth("Clear!") / 2), sr.getScaledHeight( ) - 55, Color.green.getRGB( ));
                }

            default:
                break;
        }
    }
}
