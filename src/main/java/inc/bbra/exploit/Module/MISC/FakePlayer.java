package inc.bbra.exploit.Module.MISC;

import com.mojang.authlib.GameProfile;
import inc.bbra.exploit.Module.Module;
import inc.bbra.exploit.clickgui.modules.settings.BoolSetting;
import net.minecraft.client.entity.EntityOtherPlayerMP;
import net.minecraft.init.Enchantments;
import net.minecraft.init.Items;
import net.minecraft.item.ItemStack;
import net.minecraft.world.GameType;
import org.lwjgl.input.Keyboard;

import java.util.UUID;

public class FakePlayer extends Module {

    public FakePlayer(){
        super("FakePlayer", Keyboard.KEY_NONE, Category.MISC);
    }
    BoolSetting hp1 = new BoolSetting(this,"1 HP", false);
    BoolSetting noHelmet = new BoolSetting(this,"No helmet", false);
    final private ItemStack[] armour = new ItemStack[] {
            new ItemStack(Items.DIAMOND_BOOTS),
            new ItemStack(Items.DIAMOND_LEGGINGS),
            new ItemStack(Items.DIAMOND_CHESTPLATE),
            new ItemStack(Items.DIAMOND_HELMET)
    };

    @Override
    public void onEnable() {
        EntityOtherPlayerMP clonedPlayer = new EntityOtherPlayerMP(mc.world, new GameProfile(UUID.fromString("dbc45ea7-e8bd-4a3e-8660-ac064ce58216"), "Bushroot"));
        clonedPlayer.copyLocationAndAnglesFrom(mc.player);
        clonedPlayer.rotationYawHead = mc.player.rotationYawHead;
        clonedPlayer.rotationYaw = mc.player.rotationYaw;
        clonedPlayer.rotationPitch = mc.player.rotationPitch;
        clonedPlayer.setGameType(GameType.SURVIVAL);
        if (hp1.getVal()) clonedPlayer.setHealth(1);
        else clonedPlayer.setHealth(20);
        mc.world.addEntityToWorld(-1337, clonedPlayer);


        armour[0].addEnchantment(Enchantments.PROTECTION,4);
        clonedPlayer.inventory.armorInventory.set(0, armour[0]);
        armour[1].addEnchantment(Enchantments.BLAST_PROTECTION, 4);
        clonedPlayer.inventory.armorInventory.set(1, armour[1]);
        armour[2].addEnchantment(Enchantments.PROTECTION,4);
        clonedPlayer.inventory.armorInventory.set(2, armour[2]);
        if (!noHelmet.getVal( )) {
            armour[3].addEnchantment(Enchantments.PROTECTION, 4);
            clonedPlayer.inventory.armorInventory.set(3, armour[3]);
        }

        clonedPlayer.onLivingUpdate();

    }

    @Override
    public void onDisable() {
        mc.world.removeEntityFromWorld(-1337);
    }
}
