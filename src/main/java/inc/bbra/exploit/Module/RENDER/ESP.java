package inc.bbra.exploit.Module.RENDER;

import inc.bbra.exploit.BBraExploit;
import inc.bbra.exploit.Module.Module;
import net.minecraft.entity.Entity;
import net.minecraft.entity.monster.EntityMob;
import net.minecraft.entity.passive.EntityAnimal;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraftforge.client.event.RenderWorldLastEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import org.lwjgl.input.Keyboard;
import inc.bbra.newclickgui.Setting;

import java.util.ArrayList;
import java.util.List;

public class ESP extends Module {

    private static List<Entity> glowed = new ArrayList<>();

    public ESP(){
        super("ESP", Keyboard.KEY_NONE, Category.RENDER);

        BBraExploit.instance.sManager.rSetting(new Setting("Players", this, true));
        BBraExploit.instance.sManager.rSetting(new Setting("Mobs", this, false));
        BBraExploit.instance.sManager.rSetting(new Setting("Hostiles", this, false));
    }
    @SubscribeEvent
    public void onRender(RenderWorldLastEvent e){
        for(Entity entity : mc.world.getLoadedEntityList()){
            if (BBraExploit.instance.sManager.getSettingByName(this.name, "Players").getValBoolean() && entity != mc.player && entity != glowed && entity instanceof EntityPlayer){
                entity.setGlowing(true);
                glowed.add(entity);
            } else if (BBraExploit.instance.sManager.getSettingByName(this.name, "Mobs").getValBoolean() && entity != glowed && entity instanceof EntityMob) {
                entity.setGlowing(true);
                glowed.add(entity);
            } else if (BBraExploit.instance.sManager.getSettingByName(this.name, "Hostiles").getValBoolean() && entity != glowed && entity instanceof EntityAnimal) {
                entity.setGlowing(true);
                glowed.add(entity);
            }
            else {
                entity.setGlowing(false);
            }
        }
    }
    @Override
    public void onDisable(){
// deleted onDisable cuz its not working
    }
}
