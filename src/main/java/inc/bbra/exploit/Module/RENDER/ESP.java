package inc.bbra.exploit.Module.RENDER;

import inc.bbra.exploit.Module.Module;
import inc.bbra.exploit.clickgui.modules.settings.BoolSetting;
import net.minecraft.entity.Entity;
import net.minecraft.entity.monster.EntityMob;
import net.minecraft.entity.passive.EntityAnimal;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraftforge.client.event.RenderWorldLastEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import org.lwjgl.input.Keyboard;

import java.util.ArrayList;
import java.util.List;

public class ESP extends Module {

    private static List<Entity> glowed = new ArrayList<>( );

    public ESP() {
        super("ESP", Keyboard.KEY_NONE, Category.RENDER);
    }

    BoolSetting players = new BoolSetting(this, "Players", true);
    BoolSetting mobs = new BoolSetting(this, "Mobs", false);
    BoolSetting hostiles = new BoolSetting(this, "Hostiles", false);

    @SubscribeEvent
    public void onRender(RenderWorldLastEvent e) {
        for (Entity entity : mc.world.getLoadedEntityList( )) {
            if (players.getVal( ) && entity != mc.player && entity != glowed && entity instanceof EntityPlayer) {
                entity.setGlowing(true);
                glowed.add(entity);
            } else if (mobs.getVal( ) && entity != glowed && entity instanceof EntityMob) {
                entity.setGlowing(true);
                glowed.add(entity);
            } else if (hostiles.getVal( ) && entity != glowed && entity instanceof EntityAnimal) {
                entity.setGlowing(true);
                glowed.add(entity);
            } else {
                entity.setGlowing(false);
            }
        }
    }

    @Override
    public void onDisable() {
// deleted onDisable cuz its not working
    }
}
