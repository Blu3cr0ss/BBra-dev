package inc.bbra.exploit.chatSettings

import inc.bbra.exploit.Client
import net.minecraftforge.client.event.ClientChatEvent
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent

class MsgCatcher {
    @SubscribeEvent
    fun onMessageReceived(e: ClientChatEvent) {
        try {
            val prefix = e.message[0].toString()
            val message = e.message.removePrefix(prefix).split(" ")
            var msgFinded = false
            if (prefix == Client.chatPrefix) {
                e.isCanceled = true
                for (i in MsgList.messages) {
                    if (i.key == message[0]) {
                        i.value.invoke(message)
                        msgFinded = true
                        break
                    }
                }
                if (!msgFinded) {
                    MsgList.messages.get("help")?.invoke(message)
                }
            }
        } catch (e: Exception) {
            e.printStackTrace()
        }
    }
}