package inc.bbra.exploit.chatSettings

import inc.bbra.exploit.config.ConfigManager
import inc.bbra.exploit.utils.ChatUtil
import java.io.File


object MsgList {
    val messages = hashMapOf(
        "cfg" to { msg: List<String> ->
            when (msg[1]) {
                "list" -> {
                    ChatUtil.sendMessage("List of configs: ")
                    getListOfConfigs().forEach {
                        ChatUtil.sendMessage(it.removeSuffix(".${ConfigManager.postfix}"))
                    }
                }
            }
        }
    )
}

fun getListOfConfigs(): List<String> {
    try {
        return File("apps").listFiles().map { it.name }
    } catch (e: Exception) {

    }
    return emptyList()
}
