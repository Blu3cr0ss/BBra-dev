package inc.bbra.exploit.clickgui

import inc.bbra.exploit.BBraExploit
import inc.bbra.exploit.Client
import inc.bbra.exploit.Module.Module
import inc.bbra.exploit.clickgui.modules.ModButton
import inc.bbra.exploit.clickgui.modules.ModCategory
import inc.bbra.exploit.utils.ChatUtil
import net.minecraft.client.gui.GuiButton
import net.minecraft.client.gui.GuiScreen
import org.lwjgl.input.Keyboard
import java.awt.Color
import java.util.ArrayList

class GUI : GuiScreen() {
    companion object {
        @JvmStatic
        var INSTANCE = GUI()
    }

    var modButtons = mutableListOf<ModButton>()
    private var modules = Client.modules
    var categoryList = mutableListOf<ModCategory>()

    init {
        BBraExploit.logger.info("GUI class initialized")
    }


    override fun initGui() {
        categoryList.add(ModCategory(50, 50, Module.Category.CLIENT))
        categoryList.add(ModCategory(200, 50, Module.Category.COMBAT))
        categoryList.add(ModCategory(325, 50, Module.Category.EXPLOIT))
        categoryList.add(ModCategory(450, 50, Module.Category.MISC))
        categoryList.add(ModCategory(575, 50, Module.Category.MOVEMENT))
        categoryList.add(ModCategory(700, 50, Module.Category.PLAYER))
        categoryList.add(ModCategory(825, 50, Module.Category.RENDER))
        super.initGui()
    }

    override fun drawScreen(mouseX: Int, mouseY: Int, partialTicks: Float) {
        drawDefaultBackground()
        ///////////////////////////////////////
        for (i in categoryList) {
            i.draw(mouseX, mouseY, partialTicks)
        }
        for (i in modButtons) {
            i.draw()
        }
        super.drawScreen(mouseX, mouseY, partialTicks)
    }

    override fun doesGuiPauseGame(): Boolean {
        return false
    }

    override fun mouseClicked(mouseX: Int, mouseY: Int, mouseButton: Int) {
        for (i in modButtons) {
            i.onClick(mouseX, mouseY, mouseButton)
        }
        for (i in categoryList) {
            i.onClick(mouseX, mouseY, mouseButton)
        }
        super.mouseClicked(mouseX, mouseY, mouseButton)
    }

    override fun mouseReleased(mouseX: Int, mouseY: Int, state: Int) {
        for (i in categoryList) {
            i.mouseReleased(mouseX, mouseY, state)
        }
    }

    override fun onGuiClosed() {
        KeybindCatcher.INSTANCE.isEnabled = false
        ChatUtil.sendMessage("click gui closed")
        super.onGuiClosed()
    }

}